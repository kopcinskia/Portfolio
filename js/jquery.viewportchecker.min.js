!function(e){e.fn.viewportChecker=function(t){var n={classToAdd:"visible",classToRemove:"invisible",offset:100,repeat:!1,invertBottomOffset:!0,callbackFunction:function(e,t){},scrollHorizontal:!1};e.extend(n,t);var r=this,o={height:e(window).height(),width:e(window).width()},a=-1!=navigator.userAgent.toLowerCase().indexOf("webkit")?"body":"html";return this.checkElements=function(){var t,i;n.scrollHorizontal?(t=e(a).scrollLeft(),i=t+o.width):(t=e(a).scrollTop(),i=t+o.height),r.each(function(){var r=e(this),o={},a={};if(r.data("vp-add-class")&&(a.classToAdd=r.data("vp-add-class")),r.data("vp-remove-class")&&(a.classToRemove=r.data("vp-remove-class")),r.data("vp-offset")&&(a.offset=r.data("vp-offset")),r.data("vp-repeat")&&(a.repeat=r.data("vp-repeat")),r.data("vp-scrollHorizontal")&&(a.scrollHorizontal=r.data("vp-scrollHorizontal")),r.data("vp-invertBottomOffset")&&(a.scrollHorizontal=r.data("vp-invertBottomOffset")),e.extend(o,n),e.extend(o,a),!r.hasClass(o.classToAdd)||o.repeat){var c=o.scrollHorizontal?Math.round(r.offset().left)+o.offset:Math.round(r.offset().top)+o.offset,s=o.scrollHorizontal?c+r.width():c+r.height();o.invertBottomOffset&&(s-=2*o.offset),i>c&&s>t?(r.removeClass(o.classToRemove),r.addClass(o.classToAdd),o.callbackFunction(r,"add")):r.hasClass(o.classToAdd)&&o.repeat&&(r.removeClass(o.classToAdd),o.callbackFunction(r,"remove"))}})},e(window).bind("load scroll touchmove MSPointerMove",this.checkElements),e(window).resize(function(t){o={height:e(window).height(),width:e(window).width()},r.checkElements()}),this.checkElements(),this}}(jQuery);